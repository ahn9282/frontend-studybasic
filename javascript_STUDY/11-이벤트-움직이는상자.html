<!DOCTYPE html>
<html>

   <head>
      <title>11-이벤트</title>
      
   </head>
   
   <body>
      <div class="title">
         <strong>Welcome to JS_Drawing Zone :)</strong>
        <p>방향키로 도형을 움직여보세요!</p>
      </div>
      <canvas id="canvas" width="300" height="300"></canvas>
   <script>
      let canvas = document.getElementById("canvas");
let ctx = canvas.getContext("2d");
 
let x = canvas.width / 2;
let y = canvas.height / 2;
 
let rectWidth = 10;
let rectHeight = 10;
 
let rectX = (canvas.width - rectWidth) / 2;
let rectY = (canvas.height - rectHeight) / 2;
 
let rightPressed = false;
let leftPressed = false;
let upPressed = false;
let downPressed = false;
// 먼저 눌린 키를 수신할 이벤트 리스너 필요
document.addEventListener("keydown", keyDownHandler, false);
document.addEventListener("keyup", keyUpHandler, false);
 
// 키보드가 눌렸을 때 일어나는 함수 (매개변수: e)
// 각 방향키의 keycode와 방향이 맞다면, 해당 변수들 true 
function keyDownHandler(e) {
	if(e.key == 37 || e.key == "ArrowRight") {
		rightPressed = true;
	}
	else if(e.key == 39 || e.key == "ArrowLeft") {
	  leftPressed = true;
  }
  else if(e.key == 38 || e.key == "ArrowUp") {
	  upPressed = true;
  }
  else if(e.key == 40 || e.key == "ArrowDown") {
	  downPressed = true;
  }
}
 

function keyUpHandler(e) {
	if(e.key == 37 || e.key == "ArrowRight") {
	  rightPressed = false;
  }
  else if(e.key == 39 || e.key == "ArrowLeft") {
	  leftPressed = false;
  }
  else if(e.key == 38 || e.key == "ArrowUp") {
	  upPressed = false;
  }
  else if(e.key == 40 || e.key == "ArrowDown") {
	  downPressed = false;
  }
}
function drawRect() {
	ctx.beginPath();
  ctx.rect(rectX, rectY, rectWidth, rectHeight); 
  ctx.strokeStyle = "lightgreen";
 

  ctx.stroke(); 
  ctx.closePath();
}
 
 

function draw() {
	ctx.clearRect(0, 0, canvas.width, canvas.height);
	
	drawRect();
  
	if(rightPressed && rectX < canvas.width - rectWidth) {
	  rectX += 5;
  }
  else if(leftPressed && rectX > 0) {
	  rectX -= 5;
  }
  else if(downPressed && rectY < canvas.height - rectHeight) {
	  rectY += 5;
  }
  else if(upPressed && rectY > 0) {
	  rectY -= 5;
  }
}
 
 

setInterval(draw, 10);
   </script>      
    
   
   </body>

</html>